<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>å¤©æ°”æŸ¥è¯¢</title>
    <style>
        body,
        html {
            padding: 0;
            margin: 0;
            background-color: #ffffff;
        }

        .header {
            width: 100%;
            height: 60px;
            background-color: #f0f1f3;
            box-shadow: 3px 3px 5px #d5d5d5;
            margin-left: auto;
            margin-right: auto;
            display: flex;
            /* justify-content: center; */
            align-items: center;
        }

        .header .textbox {
            width: 300px;
            height: 30px;
            border: none;
            font-size: larger;
            font-style: italic;
            margin-left: 10px;
            margin-bottom: -8px;
            /* border-bottom: 1px solid black; */
            background-color: transparent;
            /* border-radius: 9px; */
        }

        .textbox:focus {
            outline: none;
        }

        .textbox::placeholder {
            font-style: italic;
            color: black;
        }

        .button {
            margin-left: 20px;
            width: 90px;
            height: 50px;
            background-color: transparent;
            border: none;
            transition: .5s;
            font-size: larger;
        }

        .button:hover {
            background-color: rgb(22, 20, 23);
            color: white;
            border-radius: 5px;
        }

        .main {
            width: 100%;
            height: 800px;
            margin-top: 100px;
            margin-left: auto;
            margin-right: auto;
            display: flex;
            justify-content: center;
        }

        .tem {
            width: 200px;
            height: 200px;
            background-color: #f0f1f3;
            margin-right: 90px;
            margin-left: auto;
            border-radius: 20px;
            display: flex;
            transition: .5s;
            /* justify-content: center; */
        }
        .tem:hover{
            color: #ffffff;
            background-color: rgb(107, 147, 221);
            box-shadow: 5px 5px 9px #afafe4;
        }
        .rain {
            width: 200px;
            height: 200px;
            background-color: #f0f1f3;
            border-radius: 20px;
            margin-left: 50px;
            margin-right: 60px;
            display: flex;
            position: relative;
            transition: .5s;
            white-space: nowrap;
            overflow: hidden;
        }
        .rain:hover{
            color: #ffffff;
            background-color: rgb(107, 147, 221);
            box-shadow: 5px 5px 9px #afafe4;
        }
        .wind {
            width: 200px;
            height: 200px;
            background-color: #f0f1f3;
            border-radius: 20px;
            margin-left: 50px;
            margin-right: 60px;
            display: flex;
            transition: .5s;
        }
        .wind:hover{
            color: #ffffff;
            background-color: rgb(107, 147, 221);
            box-shadow: 5px 5px 9px #afafe4;
        }
        .humidity {
            width: 200px;
            height: 200px;
            background-color: #f0f1f3;
            border-radius: 20px;
            margin-left: 50px;
            display: flex;
            transition: .5s;
        }
        .humidity:hover{
            color: #ffffff;
            background-color: rgb(107, 147, 221);
            box-shadow: 5px 5px 9px #afafe4;
        }
        .tem h1 {
            font-size: 29px;
            letter-spacing: 9px;
            color: #787b86;
            margin-left: 10px;
        }
        .tem .in_tem {
            font-size: 50px;
            margin-top: 66px;
            margin-left: -40px;
        }

        .tem .in_feel {
            position: absolute;
            width: 200px;
            height: 20px;
            color: #787b86;
            font-size: 15px;
            text-align: center;
            margin-top: 159px;
        }

        .rain h1 {
            font-size: 29px;
            letter-spacing: 9px;
            color: #787b86;
            margin-left: 13px;
        }

        .in_qixiang {
            width: 200px;
            height: 140px;
            font-size: 50px;
            margin-top: 66px;
            position: absolute;
            animation: scrollText 3s linear infinite;

        }

        .in_tips {
            color: #787b86;
            font-size: 15px;
            margin-top: 160px;
            margin-left: -30px;
        }

        /* æ»šåŠ¨åŠ¨ç”» */
        @keyframes scrollText {
            from {
                left: 100%;
                /* ä»å³ä¾§å¼€å§‹ */
            }

            to {
                left: -100%;
                /* æ»šåŠ¨åˆ°å·¦ä¾§å¹¶éšè— */
            }
        }

        .wind h1 {
            font-size: 29px;
            letter-spacing: 9px;
            color: #787b86;
            margin-left: 13px;
        }

        .wind span {
            font-size: 50px;
            margin-top: 66px;
            margin-left: -40px;
        }

        .humidity h1 {
            font-size: 29px;
            letter-spacing: 9px;
            color: #787b86;
            margin-left: 13px;
        }

        .humidity span {
            font-size: 50px;
            margin-top: 66px;
            margin-left: -40px;
        }
    </style>
</head>

<body>
    <div id="app">
        <div class="header">
            <input type="text" class="textbox" placeholder="è¾“å…¥æŸ¥è¯¢åœ°åŒº">
            <input type="button" value="è·å–å¤©æ°”" @click="fetchadcode" class="button">
        </div>
        <div class="main">
            <div class="waike">
                <div class="tem">
                    <h1>æ¸©åº¦</h1>
                    <span class="in_tem">{{temperature}}Â°C</span>
                    <div class="in_feel" v-if="Number(temperature)>='35'">è¦çƒ­åŒ–äº†</div>
                    <div class="in_feel" v-else-if="Number(temperature)>='28' && Number(temperature)<'35'">å¥½çƒ­å¥½çƒ­ï¼Œå¿«å›å®¶</div>
                    <div class="in_feel" v-else-if="Number(temperature)>='20' && Number(temperature)<'28'">æ¸©åº¦é€‚å®œï¼Œé€‚åˆå‡ºå»è€</div>
                    <div class="in_feel" v-else-if="Number(temperature)>='12' && Number(temperature)<'20'">æœ‰ç‚¹å‡‰çˆ½å“¦ï¼Œæ™šä¸Šåˆ«ç€å‡‰</div>
                    <div class="in_feel" v-else-if="Number(temperature)>='0' && Number(temperature)<'12'">å†·æ­»äº†å†·æ­»äº†ğŸ¥¶</div>
                    <div class="in_feel" v-else-if="Number(temperature)<'0'&& Number(temperature)!=='N/A'">å“å‘¦æˆ‘å»ï¼Œä½ æŠŠæˆ‘å¼„å“ªäº†</div>
                </div>
            </div>
            <div class="waike">
                <div class="rain">
                    <h1>æ°”è±¡</h1>
                    <span class="in_qixiang">{{isRain}}</span>
                    <span class="in_tips" v-if="isRain.includes('é›¨')">è®°å¾—å¸¦ä¼å“¦</span>
                    <span class="in_tips" v-else-if="isRain.includes('é˜´')">é˜´å¤©ä¹Ÿè¦å¼€å¿ƒ</span>
                    <span class="in_tips" v-else-if="isRain.includes('æ™´')">å‡ºå»ç©å§ï¼</span>
                </div>
            </div>

            <div class="wind">
                <h1>é£åŠ›</h1>
                <span>{{wind}}</span>
            </div>
            <div class="humidity">
                <h1>æ¹¿åº¦</h1>
                <span>{{humidity}}</span>
            </div>
        </div>
    </div>
    <!-- å®˜ç½‘æä¾›çš„ axios åœ¨çº¿åœ°å€ -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š -->
    <script src="../js/vue.js"></script>
    <script>
        var app = new Vue({
            el: "#app",
            data: {
                temperature: "N/A",
                isRain: "N/A",
                wind: "N/A",
                humidity: "N/A"
            },
            methods: {
                async fetchadcode() {
                    const address = document.querySelector('.textbox')
                    if (address.value === "") {
                        alert('ä¸å«©ä¸ºç©º')
                        return 0
                    }
                    console.log();
                    let keywords = ""
                    let adcode = ""
                    try {
                        keywords = address.value
                        const response = await axios.get(`https://restapi.amap.com/v3/config/district?keywords=${keywords}&key=cbe6780f40c6264f93e3540b2c28ea01`);
                        adcode = response.data.districts[0].adcode
                        const response2 = await axios.get(`https://restapi.amap.com/v3/weather/weatherInfo?city=${adcode}&key=cbe6780f40c6264f93e3540b2c28ea01`)
                        this.temperature = response2.data.lives[0].temperature
                        this.isRain = response2.data.lives[0].weather
                        this.wind = response2.data.lives[0].windpower
                        this.humidity = response2.data.lives[0].humidity + '%'
                    } catch (error) {
                        console.error(error);
                    }
                }

            }
        })
    </script>
</body>

</html>